<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mòdul 7.2 - Exercici 7</title>
  </head>
  <body>
    <!--L’usuari introdueix un any a per teclat i el programa crida a un mètode que indiqui si l’any és de traspàs o no.-->

    <h3>Anys de traspàs:</h3>
    <label for="num">Introdueix un any per veure si és de traspàs o no: </label
    ><br /><br />
    <input type="number" id="numAny" maxlength="4" size="8" />
    <input type="button" onClick="validacio(numAny.value)" value="Clica aquí" />
    <br /><br />
    <p id="resultat"></p>
    <script>
      'use strict';

      //Funció auxiliar
      function anyTraspas(anyNumber) {
        let traspas = '';
        if (anyNumber % 400 == 0) {
          traspas = 'SÍ';
        } else if (anyNumber % 4 == 0 && anyNumber % 100 != 0) {
          traspas = 'SÍ';
        } else traspas = 'NO';
        return traspas;
      }

      //Funció principal
      function main(anyNumber) {
        //Sortida de dades
        let resultat = anyTraspas(anyNumber);
        document.getElementById(
          'resultat'
        ).innerHTML = `Efectivament, l'any <strong>${anyNumber}</strong>, <strong>${result}</strong> és de traspàs.`;
      }

      //Funció validació
      function validacio(numAny) {
        let validacio = true;
        let msgError =
          "Introdueix les dades correctament, en anys de 4 xifres. \nClica 'D'acord' i torna-les a introduir, sisplau.";
        let anyNumber = Number(numAny);
        if (isNaN(anyNumber) || anyNumber == '' || numAny.length != 4) {
          validacio = false;
          document.getElementById('numAny').value = '';
        }

        if (validacio) {
          main(anyNumber);
        } else {
          alert(msgError);
        }
      }
    </script>
  </body>
</html>
