<!DOCTYPE html>
<html>
   <head>
         <meta charset='utf-8'>
         <title>CADENAS</title>
         <style>em {color:teal;} input[type=text] {font-size: 105%; font-weight: bold;color:teal;}</style>
   <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>
   <body style="margin-left:10em; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
      <!--Esto es HTML-->
      <h1>Analizar funciones jugando con cadenas de texto</h1>
      <hr>
      <p>Escribe una frase: <input type="text" id="frase" size="90"/></p>
      <p>¿Qué deseas hacer?</p>
      <p><em>Las funciones para las siguientes dos opciones deberán mostrar en el elemento <b>mensaje</b> el resultado</em></p>
      <blockquote>
         <p><input type="radio" id="1" name="accion" value="1"><label for="1">Contar vocales</label></p>
         <p><input type="radio" id="2" name="accion" value="2"><label for="2">Contar palabras</label></p>
      </blockquote>
      <p><em>Las siguientes dos opciones deberán retornar al main el resultado para que éste lo muestre en el elemento <b>mensaje</b></em></p>
      <blockquote>
         <p><input type="radio" id="3" name="accion" value="3"><label for="3">Convertir a minúsculas</label></p>
         <p><input type="radio" id="4" name="accion" value="4"><label for="4">Convertir a mayúsculas</label></p>
      </blockquote>
      <p><em>Haciendo uso de bucles, completar el código para realizar la siguiente opción <b>(libre)</b></em></p>
      <blockquote>
         <p><input type="radio" id="5" name="accion" value="5"><label for="5">Frase al revés...</label></p>
      </blockquote>
      <p><input type='button' onClick='validar()' Value='Continuar' /></p>

      <h3 id="mensaje"></h3>
      <!--Acá pasaremos a JavaScript (con la instrucción SCRIPT)--> 

      <script>
         "use strict;"
         function contarVocales(cadena) {
            let vocales = "aeiouAEIOUàèéòóïüÀÈÉÒÓÏÜ";
            let numeroVocales = 0; 
            let letra;
            let largo = cadena.length;
            for (let i=0; i<largo; i++) {
               letra=cadena.charAt(i);
               if (vocales.includes(letra)) {
                  numeroVocales++;
               }
            }
            document.getElementById("mensaje").innerHTML = "La cadena tiene <em>" + numeroVocales + "</em> vocales";
         }

         function contarPalabras(cadena) {

            let numParaules = cadena.split(" ").length;
            
            /* let espacio = " ";
            let numeroPalabras = 1;
            let letra;
            let largo = cadena.length;
            for (let i=0; i<largo; i++) {
               letra=cadena.charAt(i);
               if (espacio.includes(letra)) {
                  numeroPalabras++;
               } 
            }*/
            document.getElementById("mensaje").innerHTML = "La cadena tiene <em>" + numParaules + "</em> palabras";

         }
            
         function minusculas(cadena) {
            return cadena.toLowerCase();
         }

         function mayusculas(cadena) {
            return cadena.toUpperCase();
         }

         function reves(cadena){
            let lletra, i;
            let cadenaReves ="";

            cadenaReves = cadena.split("").reverse().join("");
            
            /* for (i=0; i<=cadena.length; i++) {
               lletra=cadena.charAt(cadena.length-i);
               cadenaReves += lletra;
            } */

            return cadenaReves;
         }

         function main() {
               let cadena = document.getElementById("frase").value;  

               if (document.getElementById("1").checked) {
                  contarVocales(cadena);

               } else if (document.getElementById("2").checked) {
                  contarPalabras(cadena);

               } else if (document.getElementById("3").checked) {
                  cadena = minusculas(cadena);
                  // cuando hay un return el resultado lo recibe una variable
                  document.getElementById("mensaje").innerHTML = "La cadena en minúsculas es: <em>" + cadena + "</em>";

               } else if (document.getElementById("4").checked) {
                  cadena = mayusculas(cadena);
                  document.getElementById("mensaje").innerHTML = "La cadena en mayúsculas es: <em>" + cadena + "</em>";

               } else if (document.getElementById("5").checked) {
                  cadena = reves(cadena);
                  document.getElementById("mensaje").innerHTML = "La cadena al revés  es: <em>" + cadena + "</em>";

               } else 
                  alert("Debes elegir una de las opciones y presionar luego el botón 'Continuar'");
               
         }

         function validar() {
            let valor; //lo usamos para que las validaciones en el if queden más cortas
            let validado = true;
            let msgError = "Introduce una frase válida y presiona de nuevo el botón 'Continuar'"
         
            valor = document.getElementById("frase").value; 
            if (valor ==="") {
                  validado = false;
                  document.getElementById("frase").style.backgroundColor = "#E6B0AA";   
            } else {
                  document.getElementById("frase").style.backgroundColor = "white";
            }

            // abortar si todo no está validado
            if (!validado) {
                  alert(msgError);
            } else {
                  main();
            }
                  
         }

      </script>
   <script type="text/javascript">(function(){window['__CF$cv$params']={r:'6db42a8ced44cdc7',m:'N9DqUy1Flr1tilkhOiV72OvfPtFsaSwPeddYQxLwc1c-1644483826-0-AbxhcZ+R/i23vfx2PAJnp+8dWXZ68tRvgUO5sj6fDBXRI1l75eRJgmYbTQba612ZVMdFVQfBpxYTpuWeiFy5r2br49/C1UJizflb0QTxodBF2G4ScBvgVbpAJanV4TfaMBLRykikN5OVtEAF5+oMGph+P4nxQIFmBVbeMOwRyo7ZV0wxT6D//GHlTXuZ1ZBszA==',s:[0xaf0bd8589b,0x1e64ecfef7],}})();</script></body>
</html>